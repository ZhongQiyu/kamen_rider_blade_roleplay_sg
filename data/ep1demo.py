import json
import re

# 数据已经以字典格式给出
data = {
    "title": "ep1",
    "dialogues": [
        {
            "speaker": None,
            "time": None,
            "text": "说话人1 00:18 剣崎君。 说话人2 01:06 目標視点。 说话人3 01:06 まで7020キロ。大丈夫ですか？桜さん、お前の花札相手じゃない、見てろ。カテゴレとか面白い。なんだ、あのカード剣崎闇雲に戦えばいいというもんじゃない。は、はい。甘いな。やっぱり自由だよな。立花さんは。俺はまだ足元にも及ばねえよ。 说话人4 06:01 最初はかっこよかったけどね。君。何だ？お前。後は全然駄目だった。何言ってんだよ？初めまして、俺白井小太郎。科学専門のノンフィクションライター目指してるんだね。よかったら取材させてくれない？取材ずっと君たちのこと調べてきたんだ。鎧の男が未知の生命体と激しいバトルを繰り広げているという都市伝説。仮面ライダーって故障されるその類の話は知らない。根拠のない噂と思われているけど。いたんだ。何言ってんだよ？待ってよ。どこ行くんだよ？取材させてよ。ちょっとだけちょっとだけちょっと取材したいんだって。やっと見つけたんだよ。 说话人3 08:04 これでこの2ヶ月で3回目です。出現したアンテッド。 说话人5 08:07 はどんどん活動が活発になってるような。1体なんであんな化け物たちが？ 说话人3 08:14 君たちは封印に全力を注いでくれればいい。そっちの方は我々は調べている。 说话人4 08:20 調べているか？ラウズカードシステムが奴らに聞くのは分かってるけど。なんだ、立花。何が言いたい？素朴な疑問を一。 说话人3 08:34 つ俺を。早く助けられようと剣崎を急かしたそうですね。そんなに俺の力が信じられませんか？いや、信じてる君の力はだが。 说话人4 08:48 まあ。 说话人3 08:49 万が一の場合を考えて。 说话人4 08:55 でも、さすがですよね、橘さん。やっぱかっこいいっていうか、何ていうか。お前は何のため戦ってる？ 说话人3 09:04 何のため？ライダーになった。 说话人4 09:09 うーん仕事と言っちゃったら、身も蓋もないんですけど、やっぱりあれですかね。地球と人類を守るため、 说话人3 09:17 その純粋さを利用されないようにしろ。俺からの忠告はそれだけだ。 说话人4 09:44 人類基盤誌研究所通称ボード、この研究所は地球上で人類が勝ち残った理由は、進化論で片付けられない何らかの要因があるはずだと。その謎を調べている。なんでそんな研究に仮面ライダーなんてもんが必要なんだ。それにあの怪物は？ 说话人2 10:14 あー、 说话人3 10:22 久しぶりの我が家2ヶ月ぶりか？あれ、隣の人引っ越しかな？ 说话人1 10:30 あれいて、もう帰ったか？いや、あんたの部屋ね、別の人に貸したから。うん、そういうわけで悪いね。ちょ、ちょ。 说话人3 10:47 ちょっと待ってください。大家さん。何騒いでんだ？どうすんだよ？ご、ごめん。ごめんなさい。すみません。ちょっと待ってください。大家さん、 说话人4 11:01 ちょっと待ってくださいよ。それはないでしょう。俺、仕事先の特訓があるか？2ヶ月戻れないけど、必ず帰ってくるって。 说话人1 11:08 言ったじゃないですか？いや、うちもね、慈善事業でやってるわけじゃないから。そっちのつもりで、家賃2ヶ月も対応された干上がっちゃうわけよ。うん。 说话人3 11:18 じゃあ、俺どうすんです？ 说话人2 11:20 仕事だけの量は引き払ってんだし。 说话人1 11:22 今更あの時だけどね。それはそっちの問題だから。 说话人2 11:27 引くよ。 说话人1 11:37 いえ、何も。 说话人4 11:43 なんか大変みたいだね。いろいろお。 说话人3 11:45 前。 说话人4 11:48 で物は相談だけど、どう？うち来ない。 说话人3 11:51 うちここは毎日。 说话人4 11:54 そうだよ。両親が死んで、親代わりだった。おじさんが僕に残してくれたのさ。そのおじさんを去年死んじゃってさ。えーじゃあ、1人暮らしだ。 说话人3 12:09 えーかっこいいじゃん。 说话人4 12:14 あー動かないけどね。しかし、汚くてボロボロだな。だからさあ、君と僕で直して使おうよ。仲良く掃除したりしてさあ。ちょっと待って。俺まだ住むって言ってないよ。でも、行くわけないんだろう。僕の調べたとこだと、君は今井孤独だって。あ、お前、ちょっと待って。お前、そんなことまで調べてんのか？本当に仮面ライダーのことを本にしたいんだよ。だから君に部屋を提供する。そして君は僕の取材を受けるね。いい考えでしょう。そんなにな、俺たちのやってることは大っぴらにできることじゃないんだよ。あ、分かってるさあ。だからさあ、君のオーケーが出るまで取材しても発表しない。それならいいでしょう。 说话人3 12:55 本当かな？ 说话人4 13:00 天気予報じゃ。北の方から歓喜が来てるから。今日は冷えるって言ってたよな。ひょっとしたら零か2度か3度辛いだろうなあ。外で寝るの？分かった。分かった。もう分かったよ。何が？とにかく、まあ、済む。いや、済んでやるよ。でもな、取材全てオッケーってわけじゃないからな。いいな。了解。人類のために戦うヒーローなんだけどね。 说话人6 14:17 仮面ライダーが。 说话人4 14:18 そいつが今日から家に住むことになったんだよ。すごいだろう？ 说话人6 14:23 面白そう。 说话人1 14:24 会ってみたいね。家に連れてきて。 说话人4 14:26 あーそのうちね。何？ 说话人5 14:28 馬鹿な話してるの。そんなことより、ちゃんと仕事してるのやめちゃったんでしょ？ 说话人4 14:35 出版社。大丈夫だよ。書きたいものが見つかったんだ。本を売る方より本を確保見てなさいって。今にすっごいベストセラー書いて、姉さんもマネちゃんもあっち幸せにしてやるからね。 说话人5 14:51 ありがとう。 说话人1 14:52 ただいま。お帰りなさい。 说话人5 14:56 お帰りなさい。どう？写真 说话人4 14:59 難しいです。あれ？それ亡くなった兄さんのカメラじゃない。写真を始めたんだ。まだ全然民宿ですけど。 说话人5 15:07 いいのよ。最初車椅子なんていないんだから。うちの人も下手だった。結婚前にね、私を撮った写真なんか全部ピンボケでも。 说话人4 15:18 その不器用さが気に入って。結婚したのでした。あね。 说话人5 15:25 なのに、こら。なんで早く死んじゃったんだよ。こんな美しい奥さんと可愛い子供残して。 说话人4 15:34 姉さん。 说话人5 15:37 ごめん。私らしくないか？湿っぽいのは。 说话人4 15:42 俺さあ、何もできない弟だけど、そのたびこの2人のことがすごく心配なんだ。あんたでしょう？だから君がいてくると助かるよ。ボディーガード権下宿人として、これからも俺はこの家気。 说话人5 16:01 に入ってますから。 说话人4 16:04 なんだあいつ。 说话人5 16:05 照れ屋なのよ。大丈夫。口数少ないけど、いい人だから。 说话人6 16:10 小太郎もさあ、いつもおしゃべりばかりしてないで、はじめさんくらいクールに決めてみた。 说话人4 16:18 どうしていつもそうやっておじちゃんのこと呼び捨てにするの？ 说话人6 16:21 かなさん付けされたかったら、もっと尊敬される人間になってみれば。 说话人1 16:28 よく言ったまで。ライダーライダー。 说话人2 16:47 うん。うん。 说话人3 17:54 地球を守るため。もしもし。分かった。 说话人2 18:21 今すぐ行く。 说话人3 19:10 どうした？おい、これ、どうした？おいおいおい、なんなんだよ、これ？どうしたんだよ？1体何が？大丈夫？ 说话人1 20:02 デートがデートが襲ってきたの。木村さんがそのアンデーター映ってるみたいなの。 说话人4 20:12 立花さんが。 说话人1 20:13 何言ってんだよ。じゃ、私見た立花さんとクラスの人が揉めてるとか。 说话人3 20:21 え？あんたはな、あんたを全て言わねえんだよ。頼ってるか？お前に何がわかる？私の苦しみを抱えろ。もういい。とにかく俺の邪魔だってはさせない。俺の邪魔をするなら誘い込めば取ろう。そんなよ。 说话人4 20:39 それだけのことで橘さんを疑うのか？ 说话人3 20:42 そんなの俺、信じられないよ。俺は立花になるんだ。力をさあ、2人で頑張ろう。はい。嘘だ。橘さんが、 说话人2 21:08 橘さんが裏切ったなんて。そんなこと信じられんか。 说话人3 21:25 貴様がみんなを変身ターンアップ。橘さん、なぜ見てるんです？ 说话人2 22:26 藤村さん、そんな、そんな。100回人を裏切っちゃって。 说话人3 23:11 裏切られてバカを見た人間の方が。僕は好きだな。アンデッドはどこあったんだ？これは何の。 说话人2 23:19 ためにいただけたんだよ？仕事じゃないの。天文台に化け物が現れたって、かまね、友達と天文台に全てが俺の敵だ。 说话人3 23:33 貴様もな。これが俺の仕事だ。今その力が全壊する。"
        }
    ]
}

# 直接使用 data 字典
dialogue_text = data['dialogues'][0]['text']

# 使用正则表达式分割文本
pattern = r'说话人\d+ \d{2}:\d{2}'

# 提取说话人和时间
speakers_times = re.findall(pattern, dialogue_text)

# 分割文本
parts = re.split(pattern, dialogue_text)
if parts and parts[0] == '':
    parts.pop(0)

# 结果合并
result = []
for speaker_time, text in zip(speakers_times, parts):
    speaker, time = speaker_time.split()
    result.append({
        "speaker": speaker,
        "time": time,
        "text": text.strip()
    })

# 打印或使用结果
for entry in result:
    print(f"{entry['speaker']} at {entry['time']} said: {entry['text']}")

# 将结果保存到JSON文件
output_file_path = 'output.json'
with open(output_file_path, 'w', encoding='utf-8') as f:
    json.dump(result, f, ensure_ascii=False, indent=4)

print(f"Results saved to {output_file_path}")

# 如果需要，可以转换回JSON
